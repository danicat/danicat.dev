{{ define "main" }}
{{ .Scratch.Set "scope" "list" }}

<header>
  {{ if .Params.showBreadcrumbs | default (.Site.Params.list.showBreadcrumbs | default false) }}
  {{ partial "breadcrumbs.html" . }}
  {{ end }}
  <h1 class="mt-5 text-4xl font-extrabold text-neutral-900 dark:text-neutral">{{ .Title }}</h1>
  <div class="mt-1 mb-2 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
    {{ .Params.Description | default .Summary }}
  </div>
</header>

<section class="mt-12 prose flex max-w-full flex-col dark:prose-invert lg:flex-row">
    <div class="min-w-0 min-h-0 max-w-prose">
      {{ .Content }}
    </div>
</section>

{{ $talks := .Site.Data.talks.talks }}

{{ if gt (len $talks) 0 }}
<section class="w-full mt-12">
    <div class="flex flex-col gap-32">
        {{ range $talks }}
        <div class="flex flex-wrap md:flex-nowrap article mb-20">
            
            {{/* Image Column */}}
            {{ if .image }}
            <div class="w-full md:w-auto h-full thumbnail nozoom thumbnailshadow md:mr-7 flex-shrink-0" style="background-image:url({{ .image }});"></div>
            {{ else }}
            <div class="w-full md:w-auto h-full thumbnail nozoom thumbnailshadow md:mr-7 flex-shrink-0 flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 text-neutral-300 dark:text-neutral-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                </svg>
            </div>
            {{ end }}

            {{/* Content Column */}}
            <div class="mt-3 md:mt-0 flex flex-col flex-grow min-w-0">
                <div class="mb-2">
                    <h3 class="text-xl font-bold text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral">
                        {{ .title }}
                    </h3>
                </div>

                {{ if .events }}
                <div class="text-sm text-neutral-500 dark:text-neutral-400 mb-3">
                    {{ range .events }}
                    <div class="flex flex-wrap items-baseline gap-x-1">
                        {{ if .url }}
                        <a href="{{ .url }}" target="_blank" rel="noopener noreferrer" class="font-medium hover:underline text-primary-600 dark:text-primary-400">
                            {{ .name }}
                        </a>
                        {{ else }}
                        <span class="font-medium">{{ .name }}</span>
                        {{ end }}
                        <span class="opacity-75">• {{ .date | time.Format ":date_medium" }} • {{ .location }}</span>
                    </div>
                    {{ end }}
                </div>
                {{ end }}

                <div class="text-neutral-600 dark:text-neutral-400 text-base leading-relaxed mb-4 prose dark:prose-invert max-w-none">
                    {{ .summary }}
                </div>

                <div class="flex flex-wrap gap-6 items-center mt-4" style="gap: 1.5rem;">
                    {{ if .slides }}
                    <a href="{{ .slides }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors whitespace-nowrap" style="white-space: nowrap; word-break: normal;">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 1rem; height: 1rem;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        Slides
                    </a>
                    {{ end }}
                    {{ if .recording }}
                    <a href="{{ .recording }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors whitespace-nowrap" style="white-space: nowrap; word-break: normal;">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 1rem; height: 1rem;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Recording
                    </a>
                    {{ end }}
                </div>
            </div>
        </div>
        {{ end }}
    </div>
</section>
{{ end }}

{{ end }}
